{% assign pageArray= site.data.page_list  | json_string_to_object %}

<div id="site_pages_details" class=" my-5 ">
    <div siteFunction="sitePagesDetails" class="card shadow bg-transparent">
        
        <div class="card-header d-flex justify-content-between">
            <span class="fs-6 fw-medium">Pages</span>
            <button 
                siteFunction="btnClose" 
                whatToClose='div[siteFunction="sitePagesDetails"]' 
                type="button" 
                class="btn-close" 
                aria-label="Close">
            </button>
        </div>

        <div class="card-body">

            <!-- site pages details table -->
            <table siteFunction="sitePagesDetailsPageTable" class="table table-hover">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th siteFunction="tableDateField">Last Update</th>
                        <th>Details</th>
                        <th>Related</th>
                        <th>Similar</th>
                    </tr>
                </thead>
                <tbody>
                    {% for page in pageArray %}
                        <tr
                            siteFunction="sitePagesDetailsTablePageRow"
                            pageTitleReference="{{ page.title }}"
                            pagePermalinkReference="{{ page.permalink }}">

                            <!-- page title -->
                            <td 
                                siteFunction="sitePagesTablePageTitle" 
                                class="fw-normal align-self-center align-middle"
                                title="Click here for more info about page {{ page.title }}"
                                colFunction="pageTitle">
                                <span>
                                    <span
                                        siteFunction="sitePagesPageLinkToOffCanvas"
                                        pageTitleReference="{{ page.title }}"
                                        pagePermalinkReference="{{ page.permalink }}"
                                        class="alwaysCursorPointer">
                                        {{ page.title }}
                                    </span>
                                    <a 
                                        href="{{ page.permalink }}" 
                                        target=_blank
                                        class="mx-1">
                                        <i class="bi bi-box-arrow-up-right" style="font-size:1.1rem"></i>
                                    </a>
                                </span>
                            </td>

                            <!-- page last update -->
                            <td 
                                siteFunction="tableDateField" 
                                class="fw-normal align-self-center align-middle"
                                colFunction="pageLastUpdate">
                                {% assign original_date = page.lastUpdate %}
                                {% assign formatted_date = original_date | date: "%d-%b-%Y" %}
                                <span>{{ formatted_date }}</span>
                            </td>

                            <!-- page badges -->
                            <td 
                                class="fw-normal align-self-center align-middle"
                                colFunction="pageInfoBadges"
                                pageTitleReference="{{ page.title }}"
                                pagePermalinkReference="{{ page.permalink }}">
                                <span>
                                    place for page info badges
                                </span>
                            </td>
                            
                            <!-- page related -->
                            <td 
                                class="fw-normal align-self-center align-middle"
                                colFunction="pageInfoRelatedPages"
                                pageTitleReference="{{ page.title }}"
                                pagePermalinkReference="{{ page.permalink }}">

                                {% capture permalink_param %}
                                    {
                                        "permalink": "{{page.permalink | escape}}",
                                        "except": [""]
                                    }
                                {% endcapture %}
                                
                                {% capture pageRelated %}
                                    {% PageRelated {{ permalink_param | json_string_to_object }} %}
                                {% endcapture %}
                                {% assign pageRelatedArray = pageRelated | json_string_to_object  %}
                                {% for pageR in pageRelatedArray %}
                                    <span 
                                        siteFunction="pageRelatedPageInfo"
                                        pageTitleReference="{{ page.title }}"
                                        pagePermalinkReference="{{ page.permalink }}"
                                        pageRelatedTitleReference="{{ pageR.title }}"
                                        pageRelatedPermalinkReference="{{ pageR.permalink }}"
                                        class="m-2 py-1 px-2 bg-light-subtle rounded-pill text-nowrap d-inline-block">
                                        <span
                                            siteFunction="pageRelatedPageLinkToOffCanvas"
                                            pageTitleReference="{{ page.title }}"
                                            pagePermalinkReference="{{ page.permalink }}"
                                            pageRelatedTitleReference="{{ pageR.title }}"
                                            pageRelatedPermalinkReference="{{ pageR.permalink }}"
                                            title = "Details for page {{ pageR.title }}"
                                            class="alwaysCursorPointer text-primary">
                                            {{ pageR.title}}
                                        </span>
                                        <a 
                                            href="{{ pageR.permalink }}" 
                                            target=_blank
                                            class="mx-1">
                                            <i class="bi bi-box-arrow-up-right" style="font-size:1.1rem"></i>
                                    </a>
                                    </span>
                                {% endfor %}

                            </td>
                            
                            <!-- page similar -->
                            <td
                                class="fw-normal align-self-center align-middle"
                                colFunction="pageInfoSimilarPages"
                                pageTitleReference="{{ page.title }}"
                                pagePermalinkReference="{{ page.permalink }}">

                                {% capture permalink_param %}
                                    {
                                        "permalink": "{{page.permalink | escape}}",
                                        "except": [""]
                                    }
                                {% endcapture %}
                                
                                {% capture pageSimilar %}
                                    {% PageSimilarByContent {{ permalink_param | json_string_to_object }} %}
                                {% endcapture %}
                                {% assign pageSimilarArray = pageSimilar | json_string_to_object  %}
                                {% for pageS in pageSimilarArray %}
                                    <span 
                                        siteFunction="pageSimilarPageInfo"
                                        pageTitleReference="{{ page.title }}"
                                        pagePermalinkReference="{{ page.permalink }}"
                                        pageSimilarTitleReference="{{ pageS.title }}"
                                        pageSimilarPermalinkReference="{{ pageS.permalink }}"
                                        class="m-1 py-1 px-2 bg-body-secondary rounded-pill text-nowrap d-inline-block">
                                        <span
                                            siteFunction="pageSimilarPageLinkToOffCanvas"
                                            pageTitleReference="{{ page.title }}"
                                            pagePermalinkReference="{{ page.permalink }}"
                                            pageSimilarTitleReference="{{ pageS.title }}"
                                            pageSimilarPermalinkReference="{{ pageS.permalink }}"
                                            title = "Details for page {{ pageS.title }}"
                                            class="alwaysCursorPointer text-primary text-nowrap">
                                            {{ pageS.title}}
                                        </span>
                                        <a 
                                            href="{{ pageS.permalink }}" 
                                            target=_blank
                                            class="mx-1">
                                            <i class="bi bi-box-arrow-up-right" style="font-size:1.1rem"></i>
                                        </a>
                                    </span>
                                {% endfor %}
                            </td>

                        </tr>
                    {% endfor %}
                </tbody>
            </table>
                            
        </div>

    </div>
</div>
    
    
    
    
        



<script>sitePages__pages();</script>