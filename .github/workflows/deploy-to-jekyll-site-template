name: Copy to Jekyll Site Template

on:
  push:
    branches:
      - gh-pages # Specify the source branch you want to copy

jobs:
  copy-branch:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout source branch
        uses: actions/checkout@v2
        with:
          ref: gh-pages

      - name: Get SHA of source branch
        id: get_sha
        run: echo "::set-output name=sha::$(git rev-parse HEAD)"

      - name: Copy branch to main in destination repository
        uses: repo-sync/github-sync@v2
        with:
          src_repo: ${{ github.repository }}
          src_branch: ${{ github.ref }}
          dst_repo: pmc-community/jekyll-site-template
          dst_branch: main
          github_token: ${{ secrets.TOKEN_TO_JEKYLL_SITE_TEMPLATE }}
          force_push: true
          allow_deletions: true